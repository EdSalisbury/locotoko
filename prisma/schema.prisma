generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id String @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  email String @unique
  hash String
  name String

  listedItems Item[] @relation("listingUser")
  shippedItems Item[] @relation("shippingUser")

  @@map("users")
}

model Item {
  id String @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  title String
  description String?
  ebayCategory EbayCategory @relation("itemEbayCategory", fields: [ebayCategoryId], references: [id])
  ebayCategoryId Int
  ebayListingId String?
  ebayListing EbayListing? @relation("itemEbayListing", fields: [ebayListingId], references: [id])
  price Decimal? @db.Money
  soldPrice Decimal? @db.Money
  cost Decimal? @db.Money
  acquisitionDate DateTime?
  soldAt DateTime?
  shippedAt DateTime?
  listingUser User @relation("listingUser", fields: [listingUserId], references: [id])
  listingUserId String
  shippingUser User? @relation("shippingUser", fields: [shippingUserId], references: [id])
  shippingUserId String?
  ownerId String
  owner Owner @relation(fields: [ownerId], references: [id])
  quantity Int
  weightPounds Int?
  weightOunces Int?
  shipWeightPounds Int?
  shipWeightOunces Int?
  sizeHeightInches Int?
  sizeWidthInches Int?
  sizeDepthInches Int?
  shipSizeHeightInches Int?
  shipSizeWidthInches Int?
  shipSizeDepthInches Int?
  specifics String?
  templateId String?
  template Template? @relation("itemTemplate", fields: [templateId], references: [id])
  images String[]

  @@map("items")
}

model Owner {
  id String @id @default(cuid())
  name String
  rate Decimal

  items Item[]

  @@map("owners")
}

model EbayCategory {
  id Int @id
  name String
  parentId Int
  leaf Boolean @default(false)
  level Int @default(0)
  items Item[] @relation("itemEbayCategory")

  @@map("ebayCategories")
}

model Template {
  id String @id @default(cuid())
  name String
  ebayCategoryId Int
  specifics String?

  weightPounds Int?
  weightOunces Int?
  shipWeightPounds Int?
  shipWeightOunces Int?
  sizeHeightInches Int?
  sizeWidthInches Int?
  sizeDepthInches Int?
  shipSizeHeightInches Int?
  shipSizeWidthInches Int?
  shipSizeDepthInches Int?
  
  items Item[] @relation("itemTemplate")

  title String?
  description String?
  
  @@map("templates")
}

model EbayListing {
  id String @id
  itemId String
  item Item? @relation("itemEbayListing")

  @@map("ebayListings")
}

